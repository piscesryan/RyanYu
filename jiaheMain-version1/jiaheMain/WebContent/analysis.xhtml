<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<h:head>
	<meta http-equiv="X-UA-Compatible" content="IE=7" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="Cache-Control" content="no-transform " />
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="Cache-Control" content="no-store, must-revalidate" />
	<meta http-equiv="expires" content="0" />
	<title>统计分析-丙机房发射机故障预警系统</title>

	<script src="#{request.contextPath}/js/jquery-1.10.2.min.js" type="text/javascript"></script>
	<script language="javascript" type="text/javascript"
		src="#{request.contextPath}/My97DatePicker/WdatePicker.js"></script>
	<script src="#{request.contextPath}/js/common/common.js" type="text/javascript"></script>
	<link rel="stylesheet" href="#{request.contextPath}/css/common/common.css" />
	<script src="#{request.contextPath}/js/chart/Chart.js"></script>
	<script type="text/javascript">
		$(function(){
			var nvs=document.getElementById("left_nav").getElementsByTagName("DIV");
			for(var i=0; i &lt; nvs.length;i++){
				var nv=nvs[i];
				if($(nv).children("img").attr("alt").indexOf("配置") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/set.png");
				}
				if($(nv).children("img").attr("alt").indexOf("设备总况") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/device.png");
				}
				if($(nv).children("img").attr("alt").indexOf("告警管理") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/alarmMng.png");
				}
				if($(nv).children("img").attr("alt").indexOf("查询中心") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/menuAct/searchCenterAct.png");
				}
				if($(nv).children("img").attr("alt").indexOf("数据处理") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/dataDeal.png");
				}
				if($(nv).children("img").attr("alt").indexOf("系统日志") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/systemLog.png");
				}
				if($(nv).children("img").attr("alt").indexOf("退出系统") &gt;= 0){
					$(nv).children("img").attr("src","#{request.contextPath}/common/image/exit.png");
				}
			}
			subTotal();
		});
		
		function fuwuqiPop(){
			$("#fwqPop").css("display","block");			
		}
		function fuwuqiHide(){
			$("#fwqPop").css("display","none");			
		}
		function tishiPop(){
			$("#tishiPop").css("display","block");			
		}
		function tishiHide(){
			$("#tishiPop").css("display","none");			
		}
		function displayLiebiao(){
			$("#liebiao").css("display","block");
			$("#canvas-holder2").css("visibility","hidden");
		}
		function displayZhexiantu(){
			$("#liebiao").css("display","none");
			$("#canvas-holder2").css("visibility","visible");	
		}
		
		function subTotal(){
		       var table = document.getElementById("form:table_data");
		       var trs=table.getElementsByTagName("TR");
		       var tmp;
		       for (var i = 0; i &lt; trs.length; i++) {
		    	   var row=trs[i];
		           var val = document.getElementById("form:table:"+i+":value").innerHTML;
		           if(parseInt(val) >= 500){
						$(row).css("background","rgb(212, 30, 30)");		
						$(row).children("TD").css("color","#FFF");
		           }
		     }
		} 
	</script>
	<style type="text/css">
.file-box {
	position: relative;
}

.txt {
	height: 22px;
	border: 1px solid #cdcdcd;
	width: 180px;
}

.btn {
	background-color: #FFF;
	border: 1px solid #CDCDCD;
	height: 24px;
	width: 90px;
	color: #333;
}

.ui-widget {
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
	font-size: 16px !important;
}

.file {
	position: absolute;
	top: 0;
	right: 80px;
	height: 24px;
	filter: alpha(opacity : 0);
	opacity: 0;
	width: 260px
}
</style>
	<style type="text/css">
.left_nav div {
	float: left;
	margin-left: 10px;
}

.left {
	float: left;
}

.right {
	float: right;
}

.tool_bar div {
	float: left;
	width: 100px;
	text-align: center;
	height: 30px;
	background: url("Image/common/title_bg.png");
	border: 1px solid #DDD;
	cursor: pointer;
}

.tool_bar div span {
	position: relative;
	top: 4px;
	font-size: 14px;
	color: #333;
}

.tab div {
	float: left;
	width: 100px;
	text-align: center;
	height: 30px;
	background: #F2F2F2;
	border: 1px solid #DDD;
	cursor: pointer;
}

.tab div span {
	position: relative;
	top: 4px;
	font-size: 14px;
	color: #333;
}

table td {
	text-align: center;
}

table th {
	text-align: center;
}

.ui-widget-header {
	border: none !important;
}

.firstline>div {
	float: left;
	width: 20%;
}

.secondline>div {
	float: left;
	width: 20%;
}

.firstline>div>span {
	
}

.firstline>div>select {
	width: 100px;
}

.secondline>div>select {
	width: 100px;
}

.popinput>div {
	height: 40px;
	margin-left: 20px;
}

.popinput input {
	height: 20px;
	border: 1px solid rgb(170, 170, 170);
}

    #canvas-holder2 {
        width: 70%;
        margin: 80px 15%;
    }
    #chartjs-tooltip {
        opacity: 1;
        position: absolute;
        background: rgba(0, 0, 0, .7);
        color: white;
        padding: 3px;
        border-radius: 3px;
        -webkit-transition: all .1s ease;
        transition: all .1s ease;
        pointer-events: none;
        -webkit-transform: translate(-50%, 0);
        transform: translate(-50%, 0);
    }
   	.chartjs-tooltip-key{
   		display:inline-block;
   		width:10px;
   		height:10px;
   	}
</style>

</h:head>
<h:body style="margin: 0px;padding: 0px;overflow: hidden;">
	<h:form id="form">
		<ui:include src="common/head.xhtml">
		</ui:include>
		<div
			style="padding: 0px 22px; background: rgb(219, 234, 255) none repeat scroll 0% 0%; height: 349px;"
			class="mainContent">

			<div
				style="background: rgb(255, 255, 255) none repeat scroll 0% 0%; height: 100%;">
				<div
					style="background: rgb(219, 234, 255) none repeat scroll 0% 0%;">
					<div
						style="height: 50px; background: transparent url(&quot;Image/common/title_bg.png&quot;) repeat scroll 0% 0%; border: 1px solid rgb(204, 204, 204); border-top-right-radius: 1em; border-top-left-radius: 1em;">
						<div onclick="redirect('#{request.contextPath}/dataSearch.xhtml')"
							style="width: 130px; text-align: center; height: 100%; float: left; background: rgb(233, 235, 239) none repeat scroll 0% 0%; z-index: 10; border-top-left-radius: 1em; box-shadow: 0px 0px 2px rgb(51, 51, 51);">
							<span
								style="cursor:pointer; font-size: 18px; position: relative; top: 12px; font-weight: bold; color: #999;">数据查询</span>
						</div>
						<div style="position: relative; left: 1px;">
							<div
								style="width: 130px; text-align: center; float: left; background: rgb(233, 235, 239) none repeat scroll 0% 0%; z-index: 10; height: 50px; box-shadow: 0px 0px 1px rgb(51, 51, 51);">
								<span
									style="font-size: 18px; position: relative; font-weight: bold; color: rgb(51, 51, 51); top: 12px;">统计分析</span>
							</div>
						</div>
					</div>
				</div>
				<div style="position: relative;">
					<div
						style="padding-left: 40px; padding-right: 40px; padding-top: 20px; border-bottom: 2px solid rgb(221, 221, 221);"
						id="data_input">
						<div style="width: 1100px;" class="firstline">
							<div>
								<span>选择发射机</span> <select>
									<option>CO1发射机</option>
									<option>CO2发射机</option>
								</select>
							</div>
							<div>
								<span>选择设备</span> <select>
									<option>所有</option>
									<option>整流柜</option>
									<option>功放柜</option>
									<option>输出柜</option>
									<option>馈筒</option>
									<option>变压器</option>
								</select>
							</div>
							<div>
								<span>选择节点</span> <select>
									<option>所有</option>
									<option>散热片A相</option>
									<option>阻流线圈</option>
									<option>散热片B相</option>
									<option>散热片C相</option>
									<option>阻流线圈进线端</option>
								</select>
							</div>
							<div>
								<span>统计单位</span> <select>
									<option>秒</option>
									<option>分</option>
									<option>时</option>
								</select>
							</div>
							<div>
								<span>类型</span> <select>
									<option>默认值</option>
									<option>最大值</option>
									<option>平均值</option>
									<option>最小值</option>
								</select>
							</div>
							<img
								style="float: right; position: relative; top: -23px; left: -30px; cursor: pointer;"
								src="Image/dataDeal/print.png" />
						</div>
						<div style="clear: both; margin-top: 40px; margin-bottom: 90px; width: 1100px;" class="secondline">
							<div>
								<span>开始时间</span> <input value="" style="width: 96px; margin-left: 15px;" class="Wdate" onclick="WdatePicker()" onfocus="WdatePicker({startDate:'%y-%M-01 00:00:00',dateFmt:'yyyy-MM-dd HH:mm:ss',alwaysUseStartDate:true})" type="text"/>

							</div>
							<div>
								<span>结束时间</span> <input value="" style="width: 96px;" class="Wdate" onclick="WdatePicker()" onfocus="WdatePicker({startDate:'%y-%M-01 00:00:00',dateFmt:'yyyy-MM-dd HH:mm:ss',alwaysUseStartDate:true})" type="text"/>

							</div>
							<div>
								<span>告警等级</span> <select>
									<option>所有</option>
									<option>正常</option>
									<option>红色告警</option>
									<option>橙色告警</option>
									<option>黄色告警</option>
								</select>
							</div>
							<div>
								<span>温度范围</span> 
								<input style="width: 35px; border: 1px solid rgb(153, 153, 153); height: 20px;" type="text"/> 
								<span style="width: 12px; display: inline-block; position: relative; top: -5px; border-bottom: 1px solid rgb(153, 153, 153);"></span>
								<input style="width: 35px; border: 1px solid rgb(153, 153, 153); height: 20px;" type="text"/>
							</div>
							<div style="position: relative; width: 210px;" class="tab">
								<div>
									<span>提交</span>
								</div>
								<div>
									<span>导出</span>
								</div>
							</div>
						</div>

					</div>
					<div style="margin-left: 40px; margin-top: 20px; clear: both;"
						class="tab">
						<div onclick="displayLiebiao()">
							<span>列表展示</span>
						</div>
						<div onclick="displayZhexiantu()">
							<span>折线图展示</span>
						</div>
					</div>
					<!-- 列表展示 开始 -->
					<div style="clear: both; position: absolute; top: 186px; padding-left: 40px; padding-right: 40px;display:block;" id="liebiao">
						<p:dataTable var="vo" value="#{settingAction.nvs4}"
							rowKey="#{vo.id}" scrollable="true" scrollHeight="250"
							scrollWidth="92%"
							style="width:100%;margin: 0 auto;position: relative;top: 10px; "
							id="table" editable="true" rowIndexVar="rownum">
							<p:column headerText="序号" style="width:60px;text-align:center;backgroud:red;">
								<h:outputText value="#{vo.id}" />
							</p:column>
					
							<p:column headerText="发射机名称" style="width:60px;text-align:center;">
								<h:outputText value="#{vo.belongTransmitter}" />
							</p:column>

							<p:column headerText="设备名称" style="width:60px;text-align:center;">
								<h:outputText value="#{vo.belongDeive}" />
							</p:column>

							<p:column headerText="节点名称" style="width:60px;text-align:center;">
								<h:outputText value="#{vo.name}" />
							</p:column>
							
							<p:column headerText="数值" style="width:60px;text-align:center;">
								<h:outputText value="#{vo.value}" id="value"/>
							</p:column>

							<p:column headerText="时间" style="width:60px;text-align:center;">
								<h:outputText value="#{vo.createDate}">
									<f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm" />
								</h:outputText>
							</p:column>

						</p:dataTable>
						
						<div style="text-align: right;margin-top: 20px;">
						<span
							style="position: relative; font-size: 14px; color: rgb(51, 51, 51);">1/1页</span>
						</div>

						<div style="margin-top: 20px; float: right;"
							class="tool_bar">
							<div>
								<span>上一页</span>
							</div>
							<div>
								<span>下一页</span>
							</div>
						</div>
					</div>
					
					<!-- 列表展示 结束 -->
					
					<!-- 折线图展示 开始 -->
						<div id="canvas-holder2" style="visibility:hidden;">
					        <canvas id="chart2" width="450" height="150" />
					        <div id="chartjs-tooltip"></div>
					    </div>
					    
					     <script>

						    Chart.defaults.global.pointHitDetectionRadius = 1;
						    Chart.defaults.global.customTooltips = function(tooltip) {
						
						        var tooltipEl = $('#chartjs-tooltip');
						
						        if (!tooltip) {
						            tooltipEl.css({
						                opacity: 0
						            });
						            return;
						        }
						
						        tooltipEl.removeClass('above below');
						        tooltipEl.addClass(tooltip.yAlign);
						
						        var innerHtml = '';
						        for (var i = tooltip.labels.length - 1; i >= 0; i--) {
						        	innerHtml += [
						        		'<div class="chartjs-tooltip-section">',
						        		'	<span class="chartjs-tooltip-key" style="background-color:' + tooltip.legendColors[i].fill + '"></span>',
						        		'	<span class="chartjs-tooltip-value">' + tooltip.labels[i] + '</span>',
						        		'</div>'
						        	].join('');
						        }
						        tooltipEl.html(innerHtml);
						
						        tooltipEl.css({
						            opacity: 1,
						            left: tooltip.chart.canvas.offsetLeft + tooltip.x + 'px',
						            top: tooltip.chart.canvas.offsetTop + tooltip.y + 'px',
						            fontFamily: tooltip.fontFamily,
						            fontSize: tooltip.fontSize,
						            fontStyle: tooltip.fontStyle,
						        });
						    };
						    var randomScalingFactor = function() {
						        return Math.round(Math.random() * 40);
						    };
						    var lineChartData = {
						        labels: ["00:00", "01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00"],
						        datasets: [{
						            label: "My First dataset",
						            fillColor: "rgba(255,255,255,0.2)",
						            strokeColor: "#C94D4D",
						            pointColor: "#C94D4D",
						            pointStrokeColor: "#fff",
						            pointHighlightFill: "#fff",
						            pointHighlightStroke: "rgba(220,220,220,1)",
						            data: [randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
						        }, {
						            label: "My Second dataset",
						            fillColor: "rgba(255,255,255,0.2)",
						            strokeColor: "#4C7FBE",
						            pointColor: "rgba(151,187,205,1)",
						            pointStrokeColor: "#fff",
						            pointHighlightFill: "#fff",
						            pointHighlightStroke: "rgba(151,187,205,1)",
						            data:  [randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
						        }]
						    };
						
						    window.onload = function() {
						       
						
						        var ctx2 = document.getElementById("chart2").getContext("2d");
						        window.myLine = new Chart(ctx2).Line(lineChartData, {
						            responsive: true
						        });
						    };
						    </script>
					<!-- 折线图展示 结束 -->
					
				</div>
			</div>



			<!-- 服务器设置 弹窗 开始-->
			<div id="fwqPop" style="display:none;width: 300px; height: 200px; position: absolute; left: 0px; right: 0px; margin: auto; top: 0px; bottom: 0px; background: rgb(255, 255, 255) none repeat scroll 0% 0%; border: 1px solid rgb(204, 204, 204);">
				<div
					style="text-align: center; background: rgb(68, 139, 191) none repeat scroll 0% 0%; height: 30px;">
					<span
						style="color: rgb(255, 255, 255); position: relative; top: 4px;">服务器设置</span>
				</div>
				<div class="popinput">
					<div style="margin-top: 20px;">
						<span style="">服务器IP地址：</span><input type="text" />
					</div>
					<div style="margin-left: 80px;">
						<span>端口：</span><input type="text" />
					</div>
				</div>

				<div
					style="width: 150px; margin: 30px auto 0px; position: relative;">
					<div onclick="fuwuqiHide()" style="cursor: pointer;text-align: center; margin-right: 20px; width: 75px; float: left; background: rgb(204, 204, 204) none repeat scroll 0% 0%; border: 1px solid rgb(170, 170, 170);">
						<span style="color: rgb(51, 51, 51);">确认</span>
					</div>
					<div onclick="fuwuqiHide()" style="cursor: pointer;position: absolute; width: 75px; text-align: center; right: -10px; background: rgb(204, 204, 204) none repeat scroll 0% 0%; border: 1px solid rgb(170, 170, 170);">
						<span style="color: rgb(51, 51, 51);">取消</span>
					</div>
				</div>
			</div>
			<!-- 服务器设置 弹窗 结束-->
			
			<!-- 释放数据提示 弹窗 开始-->
			<div id="tishiPop" style="display:none;width: 300px; height: 200px; position: absolute; left: 0px; right: 0px; margin: auto; top: 0px; bottom: 0px; background: rgb(255, 255, 255) none repeat scroll 0% 0%; border: 1px solid rgb(204, 204, 204);">
				<div
					style="text-align: center; background: rgb(68, 139, 191) none repeat scroll 0% 0%; height: 30px;">
					<span
						style="color: rgb(255, 255, 255); position: relative; top: 4px;">提示</span>
				</div>
				<div class="popinput">
					<div style="margin-top: 20px;">
						<span style="">数据释放后，将无法恢复，请确认是否操作？</span>
					</div>
				</div>

				<div
					style="width: 150px; margin: 70px auto 0px; position: relative;">
					<div onclick="tishiHide()" style="cursor: pointer;text-align: center; margin-right: 20px; width: 75px; float: left; background: rgb(204, 204, 204) none repeat scroll 0% 0%; border: 1px solid rgb(170, 170, 170);">
						<span style="color: rgb(51, 51, 51);">确认</span>
					</div>
					<div onclick="tishiHide()" style="cursor: pointer;position: absolute; width: 75px; text-align: center; right: -10px; background: rgb(204, 204, 204) none repeat scroll 0% 0%; border: 1px solid rgb(170, 170, 170);">
						<span style="color: rgb(51, 51, 51);">取消</span>
					</div>
				</div>
			</div>
			<!-- 释放数据提示 弹窗 结束-->

		</div>
		<ui:include src="common/footer.xhtml">
		</ui:include>
	</h:form>
	  
</h:body>
</html>
